commit 7082036a6d3dc9aa177c84f9134bfb7f42131c1c
Author: torners <tornersdf@gmail.com>
Date:   Tue Sep 10 14:45:24 2024 -0300

    Reduzir o peso mÃ¡ximo do bloco em 1 unidade para provacar falha no teste de tamanho

diff --git a/git show v27.1 b/git show v27.1
new file mode 100644
index 0000000000..cc347b0279
--- /dev/null
+++ b/git show v27.1	
@@ -0,0 +1,314 @@
+noversion
+v0.1.5
+v0.1.6test1
+v0.10.0
+v0.10.0rc1
+v0.10.0rc2
+v0.10.0rc3
+v0.10.0rc4
+v0.10.1
+v0.10.1rc1
+v0.10.1rc2
+v0.10.1rc3
+v0.10.2
+v0.10.2rc1
+v0.10.3
+v0.10.3rc1
+v0.10.3rc2
+v0.10.4
+v0.10.4rc1
+v0.10.5
+v0.11.0
+v0.11.0rc1
+v0.11.0rc2
+v0.11.0rc3
+v0.11.1
+v0.11.1rc1
+v0.11.1rc2
+v0.11.2
+v0.11.2rc1
+v0.11.3
+v0.12-final
+v0.12.0
+v0.12.0rc1
+v0.12.0rc2
+v0.12.0rc3
+v0.12.0rc4
+v0.12.0rc5
+v0.12.1
+v0.12.1rc1
+v0.12.1rc2
+v0.13-final
+v0.13.0
+v0.13.0rc1
+v0.13.0rc2
+v0.13.0rc3
+v0.13.1
+v0.13.1rc1
+v0.13.1rc2
+v0.13.1rc3
+v0.13.2
+v0.13.2rc1
+v0.14.0
+v0.14.0rc1
+v0.14.0rc2
+v0.14.0rc3
+v0.14.1
+v0.14.1rc1
+v0.14.1rc2
+v0.14.2
+v0.14.2rc1
+v0.14.2rc2
+v0.14.3
+v0.15.0
+v0.15.0.1
+v0.15.0rc1
+v0.15.0rc2
+v0.15.0rc3
+v0.15.1
+v0.15.1rc1
+v0.15.2
+v0.16-final
+v0.16.0
+v0.16.0rc1
+v0.16.0rc2
+v0.16.0rc3
+v0.16.0rc4
+v0.16.1
+v0.16.1rc1
+v0.16.1rc2
+v0.16.2
+v0.16.2rc1
+v0.16.2rc2
+v0.16.3
+v0.17-final
+v0.17.0
+v0.17.0.1
+v0.17.0rc1
+v0.17.0rc2
+v0.17.0rc3
+v0.17.0rc4
+v0.17.1
+v0.17.1rc1
+v0.17.2
+v0.17.2rc1
+v0.17.2rc2
+v0.18-final
+v0.18.0
+v0.18.0rc1
+v0.18.0rc2
+v0.18.0rc3
+v0.18.0rc4
+v0.18.1
+v0.18.1rc1
+v0.19-final
+v0.19.0
+v0.19.0.1
+v0.19.0rc1
+v0.19.0rc2
+v0.19.0rc3
+v0.19.1
+v0.19.1rc1
+v0.19.1rc2
+v0.19.2
+v0.19.2rc1
+v0.2.0
+v0.2.10
+v0.2.11
+v0.2.12
+v0.2.13
+v0.2.2
+v0.2.4
+v0.2.5
+v0.2.6
+v0.2.7
+v0.2.8
+v0.2.9
+v0.20-final
+v0.20.0
+v0.20.0rc1
+v0.20.0rc2
+v0.20.1
+v0.20.1rc1
+v0.20.2
+v0.20.2rc1
+v0.20.2rc2
+v0.20.2rc3
+v0.21-final
+v0.21.0
+v0.21.0rc1
+v0.21.0rc2
+v0.21.0rc3
+v0.21.0rc4
+v0.21.0rc5
+v0.21.1
+v0.21.1rc1
+v0.21.2
+v0.21.2rc1
+v0.21.2rc2
+v0.2rc2
+v0.3.0
+v0.3.1
+v0.3.10
+v0.3.11_notexact
+v0.3.12
+v0.3.13
+v0.3.14
+v0.3.15
+v0.3.17
+v0.3.18
+v0.3.19
+v0.3.1rc1
+v0.3.2
+v0.3.20
+v0.3.20.01_closest
+v0.3.20.2
+v0.3.20.2_closest
+v0.3.21
+v0.3.21rc
+v0.3.22
+v0.3.22rc1
+v0.3.22rc2
+v0.3.22rc3
+v0.3.22rc4
+v0.3.22rc5
+v0.3.22rc6
+v0.3.23
+v0.3.23rc1
+v0.3.24
+v0.3.24rc1
+v0.3.24rc2
+v0.3.24rc3
+v0.3.3
+v0.3.6
+v0.3.7
+v0.3.8
+v0.3rc1
+v0.3rc2
+v0.3rc4
+v0.4.0
+v0.4.00rc1
+v0.4.00rc2
+v0.5.0
+v0.5.0rc1
+v0.5.0rc2
+v0.5.0rc3
+v0.5.0rc4
+v0.5.0rc5
+v0.5.0rc6
+v0.5.0rc7
+v0.5.1
+v0.5.1rc1
+v0.5.1rc2
+v0.5.2
+v0.5.3
+v0.5.3rc4
+v0.6.0
+v0.6.0rc1
+v0.6.0rc2
+v0.6.0rc3
+v0.6.0rc4
+v0.6.0rc5
+v0.6.0rc6
+v0.6.1
+v0.6.1rc1
+v0.6.1rc2
+v0.6.2
+v0.6.2.1
+v0.6.2.2
+v0.6.3
+v0.6.3rc1
+v0.7.0
+v0.7.0rc1
+v0.7.0rc2
+v0.7.0rc3
+v0.7.1
+v0.7.1rc1
+v0.7.2
+v0.7.2rc2
+v0.8-final
+v0.8.0
+v0.8.0rc1
+v0.8.1
+v0.8.2
+v0.8.2rc1
+v0.8.2rc2
+v0.8.2rc3
+v0.8.3
+v0.8.4
+v0.8.4rc2
+v0.8.5
+v0.8.6
+v0.8.6rc1
+v0.9-final
+v0.9.0
+v0.9.0rc1
+v0.9.0rc2
+v0.9.0rc3
+v0.9.1
+v0.9.2
+v0.9.2.1
+v0.9.2rc1
+v0.9.2rc2
+v0.9.3
+v0.9.3rc1
+v0.9.3rc2
+v0.9.4
+v0.9.5
+v0.9.5rc1
+v0.9.5rc2
+v21.99-guixtest1
+v22-final
+v22.0
+v22.0rc1
+v22.0rc2
+v22.0rc3
+v22.1
+v22.1rc1
+v22.1rc2
+v23-final
+v23.0
+v23.0rc1
+v23.0rc2
+v23.0rc3
+v23.0rc4
+v23.0rc5
+v23.1
+v23.1rc1
+v23.1rc2
+v23.2
+v23.2rc1
+v24.0
+v24.0.1
+v24.0rc1
+v24.0rc2
+v24.0rc3
+v24.0rc4
+v24.1
+v24.1rc1
+v24.1rc2
+v24.1rc3
+v24.2
+v24.2rc1
+v25.0
+v25.0rc1
+v25.0rc2
+v25.1
+v25.1rc1
+v25.2
+v25.2rc1
+v25.2rc2
+v26.0
+v26.0rc1
+v26.0rc2
+v26.0rc3
+v26.1
+v26.1rc1
+v26.1rc2
+v26.2
+v26.2rc1
+v27.0
+v27.0rc1
+v27.1
+v27.1rc1
+v28.0rc1
diff --git a/src/validation.cpp b/src/validation.cpp
index f8e1de55e9..3efdd04310 100644
--- a/src/validation.cpp
+++ b/src/validation.cpp
@@ -3772,7 +3772,7 @@ bool CheckBlock(const CBlock& block, BlockValidationState& state, const Consensu
     // checks that use witness data may be performed here.
 
     // Size limits
-    if (block.vtx.empty() || block.vtx.size() * WITNESS_SCALE_FACTOR > MAX_BLOCK_WEIGHT || ::GetSerializeSize(TX_NO_WITNESS(block)) * WITNESS_SCALE_FACTOR > MAX_BLOCK_WEIGHT)
+    if (block.vtx.empty() || block.vtx.size() * WITNESS_SCALE_FACTOR > MAX_BLOCK_WEIGHT - 1 || ::GetSerializeSize(TX_NO_WITNESS(block)) * WITNESS_SCALE_FACTOR > MAX_BLOCK_WEIGHT - 1)
         return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, "bad-blk-length", "size limits failed");
 
     // First transaction must be coinbase, the rest must not be
